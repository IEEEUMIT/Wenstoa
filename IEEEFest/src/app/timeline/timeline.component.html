<body>
  <h1 id="text">TIMELINE</h1>

  
  
    <div class="timeline">
        <div class="line"></div>
        <div class="section">
            <div class="circle"></div>
            <div class="content">
                <h2>Bombay Circuits</h2>
                <p>
                    Lorem, ipsum dolor sit amet consectetur adipisicing elit. Aperiam reprehenderit, dolorum maiores modi deserunt tempore quisquam similique non ab natus reiciendis quam quibusdam cumque quod eaque! Illo voluptatum unde ipsam.
                </p>
            </div>
        </div>

        <div class="section">
            <div class="circle"></div>
            <div class="content">
                <h2>Techy Talkies</h2>
                <p>
                    Lorem, ipsum dolor sit amet consectetur adipisicing elit. Aperiam reprehenderit, dolorum maiores modi deserunt tempore quisquam similique non ab natus reiciendis quam quibusdam cumque quod eaque! Illo voluptatum unde ipsam.
                </p>
            </div>
        </div>

        <div class="section">
            <div class="circle"></div>
            <div class="content">
                <h2>Web Srujana</h2>
                <p>
                    Lorem, ipsum dolor sit amet consectetur adipisicing elit. Aperiam reprehenderit, dolorum maiores modi deserunt tempore quisquam similique non ab natus reiciendis quam quibusdam cumque quod eaque! Illo voluptatum unde ipsam.
                </p>
            </div>
        </div>

        <div class="section">
            <div class="circle"></div>
            <div class="content">
                <h2>Naukari Central</h2>
                <p>
                    Lorem, ipsum dolor sit amet consectetur adipisicing elit. Aperiam reprehenderit, dolorum maiores modi deserunt tempore quisquam similique non ab natus reiciendis quam quibusdam cumque quod eaque! Illo voluptatum unde ipsam.
                </p>
            </div>
        </div>
    </div>



     <script>
      "use strict";

      function qs(selector, all = false) {
        return all ? document.querySelectorAll(selector) : document.querySelector(selector);
      }
      
      const sections = qs('.section', true);
      const timeline = qs('.timeline');
      const line = qs('.line');
      line.style.bottom = `calc(100% - 20px)`;
      let prevScrollY = window.scrollY;
      let up, down;
      let full = false;
      let set = 0;
      const targetY = window.innerHeight * .8;
      
      function scrollHandler(e) {
        const {
          scrollY
        } = window;
        up = scrollY < prevScrollY;
        down = !up;
        const timelineRect = timeline.getBoundingClientRect();
        const lineRect = line.getBoundingClientRect(); // const lineHeight = lineRect.bottom - lineRect.top;
      
        const dist = targetY - timelineRect.top;
        console.log(dist);
      
        if (down && !full) {
          set = Math.max(set, dist);
          line.style.bottom = `calc(100% - ${set}px)`;
        }
      
        if (dist > timeline.offsetHeight + 50 && !full) {
          full = true;
          line.style.bottom = `-50px`;
        }
      
        sections.forEach(item => {
          // console.log(item);
          const rect = item.getBoundingClientRect(); //     console.log(rect);
      
          if (rect.top + item.offsetHeight / 5 < targetY) {
            item.classList.add('show');
          }
        }); // console.log(up, down);
      
        prevScrollY = window.scrollY;
      }
      
      scrollHandler();
      line.style.display = 'block';
      window.addEventListener('scroll', scrollHandler);
     </script>
  





    <section> 
       <div class="toy-train">
          <div class="engine">
            <div class="window">
              <div class="engine-main">
                <div class="smokes">
                  <span></span>
                </div>
              </div>
            </div>
            <div class="engine-body">
              <div class="wheels">
                <div class="big-wheel"></div>
                <div class="normal-wheel"></div>
              </div>
            </div>
          </div>
          <div class="locomotive">
            <div class="trash"></div>
            <div class="wheels">
              <div class="normal-wheel"></div>
              <div class="normal-wheel"></div>
            </div>
          </div>
          <div class="tracks">
            <span></span>
            <span></span>
          </div>
        </div>
    </section>
    <section>
      <div class="toy-train1">
          <div class="engine">
            <div class="window">
              <div class="engine-main">
                <div class="smokes">
                  <span></span>
                </div>
              </div>
            </div>
            <div class="engine-body">
              <div class="wheels">
                <div class="big-wheel"></div>
                <div class="normal-wheel"></div>
              </div>
            </div>
          </div>
          <div class="locomotive">
            <div class="trash"></div>
            <div class="wheels">
              <div class="normal-wheel"></div>
              <div class="normal-wheel"></div>
            </div>
          </div>
          <div class="tracks">
            <span></span>
            <span></span>
          </div>
        </div>
    </section>
    
    

